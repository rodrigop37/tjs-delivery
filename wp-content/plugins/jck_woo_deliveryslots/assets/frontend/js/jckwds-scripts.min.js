!function(t){function e(){t(".jckwds-prevday").on("click",function(){return t.each(t(".jckwds-reserve tr"),function(){var e=t(this).find(".colVis:first").index();1!=e&&(t(this).children().eq(e-1).addClass("colVis"),t(this).find(".colVis:last").removeClass("colVis"))}),!1}),t(".jckwds-nextday").on("click",function(){t(".jckwds-reserve thead tr .colVis:last").index(),t(".jckwds-reserve thead tr .colVis:first").index();return t.each(t(".jckwds-reserve tr"),function(){var e=t(this).find(".colVis:last").index();e+1<t(this).children().length&&(t(this).children().eq(e+1).addClass("colVis"),t(this).find(".colVis:first").removeClass("colVis"))}),!1})}function s(){var e=t("#jck_delivery_date"),s=jckwds.settings.holidays_holidays_holidays,i=[];t.each(s,function(t,e){i.push(e.date.date)}),e.datepicker({minDate:"+"+jckwds.settings.datesettings_datesettings_minimum+"D",maxDate:"+"+jckwds.settings.datesettings_datesettings_maximum+"D",beforeShowDay:function(e){var s=t.datepicker.formatDate("dd/mm/yy",e);return[e.getDay()in jckwds.settings.datesettings_datesettings_days&&-1===t.inArray(s,i),""]},dateFormat:jckwds.settings.datesettings_datesettings_dateformat,onSelect:function(){jckwds.settings.timesettings_timesettings_setup_enable&&n(this.value)}})}function i(){t(document).on("click",".jckwds-reserve-slot",function(){return d(t(this)),!1})}function d(e){var s=e.parent(),i=s.attr("data-slotid"),d=s.attr("data-slotdate"),n=s.attr("data-slotstarttime"),c=s.attr("data-slotendtime"),r=(e.closest(".jckwds-reserve-wrap"),'<div class="jckwds_loading"><i class="jckwds-icn-spin animate-spin"></i></div>');e.hide().after(r);var a={action:"jckwds_remove_reserved_slot",nonce:jckwds.ajaxNonce};jQuery.post(jckwds.ajaxUrl,a,function(s){if(s.success){jQuery("body").trigger("reservation_removed");var r={action:"jckwds-reserve_slot",nonce:jckwds.ajaxNonce,slotId:i,slotDate:d,slotStarttime:n,slotEndtime:c};jQuery.post(jckwds.ajaxUrl,r,function(s){s.success&&(jQuery("body").trigger("reservation_added"),t("td.jckwds-reserved").removeClass("jckwds-reserved").html(jckwds.strings.reserve),e.closest("td").addClass("jckwds-reserved").html(jckwds.strings.reserved))})}})}function n(e){$timeSlotSelect=t("#jck_delivery_time"),$firstTimeSlotSelectItem=$timeSlotSelect.find("option:eq(0)"),$timeSlotSelect.find("option:gt(0)").remove(),$firstTimeSlotSelectItem.text(jckwds.strings.loading);var s={action:"jckwds_slots_on_date",nonce:jckwds.ajaxNonce,date:e};jQuery.post(jckwds.ajaxUrl,s,function(t){1==t.success?($firstTimeSlotSelectItem.text(jckwds.strings.selectslot),$timeSlotSelect.append(t.html),jQuery("body").trigger("timeslots_loaded")):$firstTimeSlotSelectItem.text(jckwds.strings.noslots)})}t(document).ready(function(){s(),e(),i()})}(jQuery);